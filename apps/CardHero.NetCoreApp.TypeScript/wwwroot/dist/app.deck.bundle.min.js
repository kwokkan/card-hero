(window["wj"] = window["wj"] || []).push([[4],{

/***/ "RMSQ":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__("q1tI");
var react_default = /*#__PURE__*/__webpack_require__.n(react);

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__("i8i4");
var react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);

// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js
var react_router_dom = __webpack_require__("55Ip");

// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules
var react_router = __webpack_require__("Ty5D");

// EXTERNAL MODULE: ./ClientApp/components/shared/appBootstrap.ts
var appBootstrap = __webpack_require__("QBAw");

// EXTERNAL MODULE: ./ClientApp/services/CardCollectionService.ts + 1 modules
var CardCollectionService = __webpack_require__("lynQ");

// EXTERNAL MODULE: ./ClientApp/services/DeckService.ts
var DeckService = __webpack_require__("qE4i");

// EXTERNAL MODULE: ./ClientApp/styles/index.tsx
var styles = __webpack_require__("ocCX");

// EXTERNAL MODULE: ./ClientApp/components/shared/Layout.tsx + 1 modules
var Layout = __webpack_require__("Xvn6");

// CONCATENATED MODULE: ./ClientApp/components/deck/Deck.tsx






class Deck_Deck extends react["PureComponent"] {
    constructor(props) {
        super(props);
        this.state = {};
    }
    async populateCollection() {
        const collection = await CardCollectionService["a" /* default */].getCollection();
        this.setState((prevState) => ({
            edit: {
                ...prevState.edit,
                ownedCards: collection
            }
        }));
    }
    async populateDeck(id) {
        const decks = await DeckService["a" /* default */].getDecks({
            ids: [
                id
            ]
        });
        const deck = decks[0];
        this.setState((prevState) => ({
            edit: {
                ...prevState.edit,
                deck: deck
            }
        }));
    }
    async componentDidMount() {
        const deckId = this.props.match.params.id;
        await Promise.all([
            this.populateDeck(deckId),
            this.populateCollection()
        ]);
    }
    async componentWillReceiveProps(nextProps) {
        const deckId = this.props.match.params.id;
        if (nextProps.match.params.id !== deckId) {
            await this.populateDeck(deckId);
        }
    }
    render() {
        const edit = this.state.edit;
        if (!edit) {
            return null;
        }
        const deck = edit.deck;
        if (!deck) {
            return null;
        }
        const ownedCards = edit.ownedCards;
        const usedCards = deck.cards;
        return (react_default.a.createElement(Layout["a" /* default */], null,
            react_default.a.createElement("div", { className: "row" },
                react_default.a.createElement("div", { className: "col-lg-4" },
                    react_default.a.createElement("div", { className: "card" },
                        react_default.a.createElement("div", { className: "card-body" },
                            react_default.a.createElement("h4", { className: "card-title" },
                                react_default.a.createElement(react_router_dom["b" /* Link */], { to: '/' + deck.id }, deck.name),
                                react_default.a.createElement(styles["default"], { icon: "star", className: 'deck-favourite float-right' + (deck.isFavourited ? ' enabled' : ''), "data-deck-id": deck.id })),
                            react_default.a.createElement("p", { className: "card-text" }, deck.description)),
                        react_default.a.createElement("div", { className: "card-footer" },
                            react_default.a.createElement("button", { type: "button", id: "save-deck", className: "btn btn-success pull-right", "data-deck-id": deck.id }, "Save")))),
                react_default.a.createElement("div", { className: "col-lg-4" },
                    react_default.a.createElement("div", { className: "card" },
                        react_default.a.createElement("div", { className: "card-body" },
                            react_default.a.createElement("h4", { className: "card-title" }, "Owned Cards"),
                            react_default.a.createElement("div", { className: "card-text" },
                                react_default.a.createElement("ul", { id: "owned-cards", className: "ch-cards droppable" }, ownedCards && ownedCards.map(cc => react_default.a.createElement("li", { key: cc.id, className: "ch-card draggable", "data-card-collection-id": cc.id }, cc.card.name))))))),
                react_default.a.createElement("div", { className: "col-lg-4" },
                    react_default.a.createElement("div", { className: "card" },
                        react_default.a.createElement("div", { className: "card-body" },
                            react_default.a.createElement("h4", { className: "card-title" }, "Current Deck"),
                            react_default.a.createElement("div", { className: "card-text" },
                                react_default.a.createElement("ul", { id: "used-cards", className: "ch-cards droppable", "data-max-cards": deck.maxCards }, usedCards && usedCards.map(cc => react_default.a.createElement("li", { key: cc.id, className: "ch-card draggable", "data-card-collection-id": cc.cardCollectionId }, cc.name))))))))));
    }
}

// EXTERNAL MODULE: ./ClientApp/constants/constants.ts
var constants = __webpack_require__("m7Oc");

// CONCATENATED MODULE: ./ClientApp/components/deck/DeckList.tsx



function DeckList(props) {
    return (react_default.a.createElement("div", { className: "row" },
        react_default.a.createElement("table", { className: "table table-striped" },
            react_default.a.createElement("thead", { className: "thead-inverse" },
                react_default.a.createElement("tr", null,
                    react_default.a.createElement("th", null, "Name"))),
            react_default.a.createElement("tbody", null, props.decks.map(d => react_default.a.createElement("tr", { key: d.id },
                react_default.a.createElement("th", { scope: "row" },
                    react_default.a.createElement(styles["default"], { icon: "star", className: 'deck-favourite' + (d.isFavourited ? ' enabled' : ''), "data-deck-id": d.id }),
                    ' ',
                    react_default.a.createElement(react_router_dom["b" /* Link */], { to: '/' + d.id }, d.name))))))));
}

// EXTERNAL MODULE: ./node_modules/react-bootstrap/es/Modal.js + 17 modules
var Modal = __webpack_require__("frVR");

// EXTERNAL MODULE: ./ClientApp/utils/nameof.ts
var nameof = __webpack_require__("ROx7");

// CONCATENATED MODULE: ./ClientApp/components/deck/DeckCreateModal.tsx



class DeckCreateModal_DeckCreateModal extends react["Component"] {
    constructor(props) {
        super(props);
        this.state = DeckCreateModal_DeckCreateModal.defaultState;
    }
    onCreated() {
        this.props.onHide();
        if (this.props.onCreated) {
            const { name, description } = this.state;
            this.props.onCreated({ name, description });
        }
    }
    onInputChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState, () => {
            this.setState({ canSave: this.canSave() });
        });
    }
    canSave() {
        return !!this.state.name;
    }
    onExited() {
        this.setState(DeckCreateModal_DeckCreateModal.defaultState);
    }
    render() {
        return (react_default.a.createElement(Modal["a" /* default */], Object.assign({}, this.props, { onExited: () => this.onExited, centered: true }),
            react_default.a.createElement(Modal["a" /* default */].Header, { closeButton: true },
                react_default.a.createElement(Modal["a" /* default */].Title, null, "Create Deck")),
            react_default.a.createElement(Modal["a" /* default */].Body, null,
                react_default.a.createElement("div", { className: "row" },
                    react_default.a.createElement("div", { className: "container" },
                        react_default.a.createElement("form", { className: "form auto-post" },
                            react_default.a.createElement("div", { className: "form-group" },
                                react_default.a.createElement("label", { htmlFor: "mName" }, "Name"),
                                react_default.a.createElement("input", { type: "text", id: "mName", className: "form-control", placeholder: "Name", value: this.state.name, onChange: (e) => this.onInputChange(Object(nameof["a" /* nameof */])('name'), e) })),
                            react_default.a.createElement("div", { className: "form-group" },
                                react_default.a.createElement("label", { htmlFor: "mDescription" }, "Description"),
                                react_default.a.createElement("input", { type: "text", id: "mDescription", className: "form-control", placeholder: "Description", value: this.state.description, onChange: (e) => this.onInputChange(Object(nameof["a" /* nameof */])('description'), e) })))))),
            react_default.a.createElement(Modal["a" /* default */].Footer, null,
                react_default.a.createElement("button", { type: "button", className: "btn btn-secondary", onClick: this.props.onHide }, "Close"),
                react_default.a.createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.onCreated(), disabled: !this.state.canSave }, "OK"))));
    }
}
DeckCreateModal_DeckCreateModal.defaultState = {
    name: undefined,
    description: undefined,
    canSave: false
};

// CONCATENATED MODULE: ./ClientApp/components/deck/DeckSearch.tsx




class DeckSearch_DeckSearch extends react["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            modalShown: false
        };
    }
    async componentDidMount() {
        await this.getDecks();
    }
    async getDecks(e) {
        if (e != null) {
            e.preventDefault();
            e.stopPropagation();
        }
        var decks = await DeckService["a" /* default */].getDecks(this.state);
        if (this.props.onDecksPopulated) {
            this.props.onDecksPopulated(decks);
        }
    }
    onInputChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState);
    }
    onSelectChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState);
    }
    async onDeckCreated(deck) {
        await DeckService["a" /* default */].createDeck(deck);
        await this.getDecks();
    }
    render() {
        return (react_default.a.createElement(react["Fragment"], null,
            react_default.a.createElement("div", { className: "card" },
                react_default.a.createElement("h4", { className: "card-header" }, "Decks"),
                react_default.a.createElement("form", { method: "get", className: "search-filter deck-filter" },
                    react_default.a.createElement("div", { className: "card-body" },
                        react_default.a.createElement("div", { className: "form-group" },
                            react_default.a.createElement("input", { type: "text", name: "name", className: "form-control", placeholder: "Name", value: this.state.name, onChange: (e) => this.onInputChange('name', e) })),
                        react_default.a.createElement("div", { className: "form-group" },
                            react_default.a.createElement("select", { name: "pageSize", className: "form-control", value: this.state.pageSize, onChange: (e) => this.onSelectChange('pageSize', e) },
                                react_default.a.createElement("option", { value: "10" }, "10"),
                                react_default.a.createElement("option", { value: "25" }, "25"),
                                react_default.a.createElement("option", { value: "50" }, "50"),
                                react_default.a.createElement("option", { value: "100" }, "100")))),
                    react_default.a.createElement("div", { className: "card-footer" },
                        react_default.a.createElement("button", { type: "button", className: "btn btn-success auto-modal", onClick: () => this.setState({ modalShown: true }) },
                            react_default.a.createElement(styles["default"], { icon: "plus" })),
                        react_default.a.createElement("button", { type: "submit", className: "btn btn-primary pull-right", onClick: (e) => this.getDecks(e) }, "Filter"),
                        react_default.a.createElement("div", { className: "clearfix" })))),
            react_default.a.createElement(DeckCreateModal_DeckCreateModal, { show: this.state.modalShown, onCreated: (deck) => this.onDeckCreated(deck), onHide: () => this.setState({ modalShown: false }) })));
    }
}

// CONCATENATED MODULE: ./ClientApp/components/deck/DeckApp.tsx





class DeckApp_DeckApp extends react["Component"] {
    constructor(props) {
        super(props);
        this.state = { decks: [] };
    }
    onDecksPopulated(decks) {
        if (constants["a" /* default */].Debug) {
            if (decks != null) {
                decks.forEach(deck => {
                    console.log(deck);
                });
            }
        }
        this.setState({
            decks: decks
        });
    }
    render() {
        return (react_default.a.createElement(Layout["a" /* default */], { sideContent: react_default.a.createElement(DeckSearch_DeckSearch, { onDecksPopulated: (x) => this.onDecksPopulated(x) }) },
            react_default.a.createElement(DeckList, { decks: this.state.decks })));
    }
}

// CONCATENATED MODULE: ./ClientApp/components/deck/index.tsx






react_dom_default.a.render(react_default.a.createElement(react_router_dom["a" /* BrowserRouter */], { basename: appBootstrap["a" /* default */].url('Deck') },
    react_default.a.createElement(react_router["c" /* Switch */], null,
        react_default.a.createElement(react_router["a" /* Route */], { path: "/", exact: true, component: DeckApp_DeckApp }),
        react_default.a.createElement(react_router["a" /* Route */], { path: "/:id", component: Deck_Deck }))), appBootstrap["a" /* default */].rootElement);


/***/ })

},[["RMSQ",0,1]]]);