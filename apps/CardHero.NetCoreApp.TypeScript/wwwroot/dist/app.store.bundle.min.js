(window["wj"] = window["wj"] || []).push([[7],{

/***/ "1sfg":
/*!*********************************************************!*\
  !*** ./ClientApp/components/store/StoreItemDetails.tsx ***!
  \*********************************************************/
/*! exports provided: StoreItemDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoreItemDetails", function() { return StoreItemDetails; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _shared_CoinFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/CoinFormat */ "hdYD");
/* harmony import */ var _shared_DateFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/DateFormat */ "PaiT");



function StoreItemDetails(props) {
    const si = props.storeItem;
    const onSelectItem = () => {
        if (props.onSelectItem) {
            props.onSelectItem(si);
        }
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { className: "card-header" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, si.name),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", { className: "pull-right badge-pill badge-secondary" }, si.itemCount)),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-body" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, si.description)),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-footer" },
            si.expiry &&
                (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "Expires "),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_DateFormat__WEBPACK_IMPORTED_MODULE_2__["DateFormat"], { date: si.expiry }))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-primary pull-right", onClick: onSelectItem },
                "Buy for ",
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_CoinFormat__WEBPACK_IMPORTED_MODULE_1__["CoinFormat"], { coins: si.cost, title: si.cost.toString(), stripEmpty: true })))));
}


/***/ }),

/***/ "GQnm":
/*!**********************************************************!*\
  !*** ./ClientApp/components/store/StoreItemBuyModal.tsx ***!
  \**********************************************************/
/*! exports provided: StoreItemBuyModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoreItemBuyModal", function() { return StoreItemBuyModal; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "vS6h");


class StoreItemBuyModal extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
    }
    onHide() {
        if (this.props.onHide) {
            this.props.onHide();
        }
    }
    onPurchase() {
        if (this.props.onPurchase) {
            this.props.onPurchase(this.props.storeItem);
        }
    }
    render() {
        if (!this.props.storeItem)
            return null;
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Modal"], Object.assign({}, this.props, { centered: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Modal"].Header, { closeButton: true },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Modal"].Title, null, "Purchase item")),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Modal"].Body, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "container" },
                        "Buy ",
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", null, this.props.storeItem.name),
                        "?"))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__["Modal"].Footer, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-secondary", onClick: () => this.onHide() }, "Cancel"),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.onPurchase() }, "Purchase"))));
    }
}


/***/ }),

/***/ "YHU9":
/*!*************************************************!*\
  !*** ./ClientApp/components/store/StoreApp.tsx ***!
  \*************************************************/
/*! exports provided: StoreApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoreApp", function() { return StoreApp; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _shared_Layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/Layout */ "Xvn6");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Store */ "jDF6");



class StoreApp extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_Layout__WEBPACK_IMPORTED_MODULE_1__["Layout"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Store__WEBPACK_IMPORTED_MODULE_2__["Store"], null)));
    }
}


/***/ }),

/***/ "gNsK":
/*!**********************************************!*\
  !*** ./ClientApp/components/store/index.tsx ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "i8i4");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _shared_AppBootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/AppBootstrap */ "Zedm");
/* harmony import */ var _StoreApp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StoreApp */ "YHU9");




react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreApp__WEBPACK_IMPORTED_MODULE_3__["StoreApp"], null), _shared_AppBootstrap__WEBPACK_IMPORTED_MODULE_2__["AppBootstrap"].rootElement);


/***/ }),

/***/ "jDF6":
/*!**********************************************!*\
  !*** ./ClientApp/components/store/Store.tsx ***!
  \**********************************************/
/*! exports provided: Store */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Store", function() { return Store; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contexts/AccountContext */ "KZE4");
/* harmony import */ var _services_AccountService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/AccountService */ "f5VE");
/* harmony import */ var _services_StoreService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/StoreService */ "GAEF");
/* harmony import */ var _StoreItemBuyModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StoreItemBuyModal */ "GQnm");
/* harmony import */ var _StoreItemDetails__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StoreItemDetails */ "1sfg");






class Store extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            items: [],
            modalShown: false
        };
    }
    async componentDidMount() {
        const items = await _services_StoreService__WEBPACK_IMPORTED_MODULE_3__["StoreService"].getStoreItems();
        this.setState({
            items: items
        });
    }
    onModalHide() {
        this.setState({
            modalShown: false
        });
    }
    onSelectItem(item) {
        if (true) {
            console.log(item);
        }
        this.setState({
            selectedItem: item,
            modalShown: true
        });
    }
    async onPurchase(item) {
        const items = await _services_StoreService__WEBPACK_IMPORTED_MODULE_3__["StoreService"].buyCardBundle(item.id);
        if (true) {
            console.log(items);
        }
        this.setState({
            modalShown: false
        });
        const user = await _services_AccountService__WEBPACK_IMPORTED_MODULE_2__["AccountService"].getAccount();
        if (user) {
            this.context.setUser(user);
        }
        alert('Purchased bundle ' + item.name);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" }, this.state.items.map(x => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: x.id, className: "col-lg-4" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreItemDetails__WEBPACK_IMPORTED_MODULE_5__["StoreItemDetails"], { storeItem: x, onSelectItem: (item) => this.onSelectItem(item) })))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StoreItemBuyModal__WEBPACK_IMPORTED_MODULE_4__["StoreItemBuyModal"], { show: this.state.modalShown, onHide: () => this.onModalHide(), onPurchase: (item) => this.onPurchase(item), storeItem: this.state.selectedItem })));
    }
}
Store.contextType = _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__["AccountContext"];


/***/ })

},[["gNsK",0,1]]]);