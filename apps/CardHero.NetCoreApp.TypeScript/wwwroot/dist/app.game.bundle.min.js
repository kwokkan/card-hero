(window["wj"] = window["wj"] || []).push([[5],{

/***/ "+C8l":
/*!***********************************************!*\
  !*** ./ClientApp/components/game/GameApp.tsx ***!
  \***********************************************/
/*! exports provided: GameApp */
/*! exports used: GameApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameApp; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _services_DeckService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../services/DeckService */ "qE4i");
/* harmony import */ var _shared_Layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/Layout */ "Xvn6");
/* harmony import */ var _GameList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameList */ "B8dK");
/* harmony import */ var _GameSearch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GameSearch */ "LH6D");





class GameApp extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            games: [],
            decks: []
        };
    }
    async getDecks() {
        const decks = await _services_DeckService__WEBPACK_IMPORTED_MODULE_1__[/* DeckService */ "a"].getDecks();
        if (true) {
            if (decks != null) {
                decks.forEach(deck => {
                    console.log(deck);
                });
            }
        }
        this.setState({
            decks: decks
        });
    }
    async componentDidMount() {
        await this.getDecks();
    }
    onGamesPopulated(games) {
        if (true) {
            if (games != null) {
                games.forEach(game => {
                    console.log(game);
                });
            }
        }
        this.setState({
            games: games
        });
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_Layout__WEBPACK_IMPORTED_MODULE_2__[/* Layout */ "a"], { sideContent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameSearch__WEBPACK_IMPORTED_MODULE_4__[/* GameSearch */ "a"], { decks: this.state.decks, onGamesPopulated: (x) => this.onGamesPopulated(x) }) },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameList__WEBPACK_IMPORTED_MODULE_3__[/* GameList */ "a"], { games: this.state.games, decks: this.state.decks })));
    }
}


/***/ }),

/***/ 5:
/*!**************************************************************************!*\
  !*** multi ./ClientApp/globals.ts ./ClientApp/components/game/index.tsx ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ./ClientApp/globals.ts */"V9E0");
module.exports = __webpack_require__(/*! ./ClientApp/components/game/index.tsx */"HLzV");


/***/ }),

/***/ "7E1t":
/*!********************************************************!*\
  !*** ./ClientApp/components/game/GameDetailWidget.tsx ***!
  \********************************************************/
/*! exports provided: GameDetailWidget */
/*! exports used: GameDetailWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameDetailWidget; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "55Ip");
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _shared_DateFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/DateFormat */ "PaiT");




function GameDetailWidget(props) {
    const game = props.game;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { className: "card-header" }, game ?
            (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__[/* Link */ "b"], { to: '/' + game.id }, game.name))
            :
                (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "Unknown"))),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", { className: "list-group list-group-flush" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { className: "list-group-item" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", null, "Type:"),
                ' ',
                game ?
                    (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, _clients_clients__WEBPACK_IMPORTED_MODULE_2__[/* GameType */ "i"][game.type]))
                    :
                        (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "Unknown"))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { className: "list-group-item" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", null, "Start Time:"),
                ' ',
                game ?
                    (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_DateFormat__WEBPACK_IMPORTED_MODULE_3__[/* DateFormat */ "a"], { date: game.startTime }))
                    :
                        (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", null, "Unknown"))))));
}


/***/ }),

/***/ "B8dK":
/*!************************************************!*\
  !*** ./ClientApp/components/game/GameList.tsx ***!
  \************************************************/
/*! exports provided: GameList */
/*! exports used: GameList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameList; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "55Ip");
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contexts/AccountContext */ "KZE4");
/* harmony import */ var _services_GameService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/GameService */ "CsQV");
/* harmony import */ var _shared_DateFormat__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/DateFormat */ "PaiT");
/* harmony import */ var _GameSelectDeckModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GameSelectDeckModal */ "m/i0");







class GameList extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            modalShown: false
        };
    }
    selectGame(game) {
        this.setState({
            modalShown: true,
            selectedGame: game
        });
    }
    onHide() {
        this.setState({
            modalShown: false,
            selectedGame: null
        });
    }
    async onGameJoined(props) {
        if (true) {
            console.log(props);
        }
        await _services_GameService__WEBPACK_IMPORTED_MODULE_4__[/* GameService */ "a"].join(props.gameId, props.deckId);
    }
    render() {
        const user = this.context.user;
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("table", { className: "table table-striped" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("thead", { className: "thead-inverse" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "Game"),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "Type"),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", null, "Start Time"),
                            user &&
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null))),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tbody", null, this.props.games.map(g => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tr", { key: g.id },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("th", { scope: "row" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__[/* Link */ "b"], { to: '/' + g.id },
                                "#",
                                g.id,
                                ' ',
                                g.name)),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null, _clients_clients__WEBPACK_IMPORTED_MODULE_2__[/* GameType */ "i"][g.type]),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_DateFormat__WEBPACK_IMPORTED_MODULE_5__[/* DateFormat */ "a"], { date: g.startTime })),
                        user &&
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("td", null,
                                g.canJoin &&
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.selectGame(g) }, "Join"),
                                g.canPlay &&
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-primary" }, "Play"))))))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameSelectDeckModal__WEBPACK_IMPORTED_MODULE_6__[/* GameSelectDeckModal */ "a"], { show: this.state.modalShown, game: this.state.selectedGame, decks: this.props.decks, onHide: () => this.onHide(), onJoined: (props) => this.onGameJoined(props) })));
    }
}
GameList.contextType = _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_3__[/* AccountContext */ "a"];


/***/ }),

/***/ "BWid":
/*!*******************************************************!*\
  !*** ./ClientApp/components/game/GameUsersWidget.tsx ***!
  \*******************************************************/
/*! exports provided: GameUsersWidget */
/*! exports used: GameUsersWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameUsersWidget; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contexts/AccountContext */ "KZE4");


function GameUsersWidget(props) {
    const context = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__[/* AccountContext */ "a"]);
    const user = context.user;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { className: "card-header" }, "Players"),
        props.users && props.users.length > 0 ?
            (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", { className: "list-group list-group-flush" }, props.users.map(x => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { key: x.id, className: 'list-group-item' + (props.currentGameUserId === x.id ? ' current' : '') + (user && user.id === x.userId ? ' you' : '') },
                props.currentGameUserId === x.id ?
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", { title: "Current player" }, x.id)
                    :
                        (x.id),
                user && user.id === x.userId ? ' (You)' : ''))))
            :
                (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, "No players"))));
}


/***/ }),

/***/ "HLzV":
/*!*********************************************!*\
  !*** ./ClientApp/components/game/index.tsx ***!
  \*********************************************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "i8i4");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "55Ip");
/* harmony import */ var _shared_AppBootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/AppBootstrap */ "Zedm");
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Game */ "wMVJ");
/* harmony import */ var _GameApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GameApp */ "+C8l");






Object(react_dom__WEBPACK_IMPORTED_MODULE_1__["render"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__[/* BrowserRouter */ "a"], { basename: _shared_AppBootstrap__WEBPACK_IMPORTED_MODULE_3__[/* AppBootstrap */ "a"].url('Game') },
    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__[/* Switch */ "d"], null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__[/* Route */ "c"], { path: "/", exact: true, component: _GameApp__WEBPACK_IMPORTED_MODULE_5__[/* GameApp */ "a"] }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__[/* Route */ "c"], { path: "/:id", component: _Game__WEBPACK_IMPORTED_MODULE_4__[/* Game */ "a"] }))), _shared_AppBootstrap__WEBPACK_IMPORTED_MODULE_3__[/* AppBootstrap */ "a"].rootElement);


/***/ }),

/***/ "LH6D":
/*!**************************************************!*\
  !*** ./ClientApp/components/game/GameSearch.tsx ***!
  \**************************************************/
/*! exports provided: GameSearch */
/*! exports used: GameSearch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameSearch; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _services_GameService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/GameService */ "CsQV");
/* harmony import */ var _styles_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../styles/index */ "ocCX");
/* harmony import */ var _GameCreateModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GameCreateModal */ "dQvt");





class GameSearch extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            modalShown: false
        };
    }
    async componentDidMount() {
        this.getGames();
    }
    async getGames(e) {
        if (e != null) {
            e.preventDefault();
            e.stopPropagation();
        }
        var games = await _services_GameService__WEBPACK_IMPORTED_MODULE_2__[/* GameService */ "a"].getGames(this.state);
        if (this.props.onGamesPopulated) {
            this.props.onGamesPopulated(games);
        }
    }
    onInputChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState);
    }
    onCheckboxChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.checked;
        this.setState(newState);
    }
    onSelectChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState);
    }
    async onGameCreated(game) {
        if (true) {
            console.log(game);
        }
        const postGame = new _clients_clients__WEBPACK_IMPORTED_MODULE_1__[/* GameCreateModel */ "g"](game);
        await _services_GameService__WEBPACK_IMPORTED_MODULE_2__[/* GameService */ "a"].createGame(postGame);
        await this.getGames();
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { className: "card-header" }, "Games"),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form", { method: "get", className: "search-filter game-filter" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-body" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", { type: "text", name: "name", className: "form-control", placeholder: "Name", value: this.state.name, onChange: (e) => this.onInputChange('name', e) })),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-check" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { className: "form-check-label" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", { type: "checkbox", className: "form-check-input", defaultChecked: this.state.activeOnly, onChange: (e) => this.onCheckboxChange('activeOnly', e) }),
                                ' ',
                                "Active Only")),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("select", { name: "pageSize", className: "form-control", value: this.state.pageSize, onChange: (e) => this.onSelectChange('pageSize', e) },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { value: "10" }, "10"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { value: "25" }, "25"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { value: "50" }, "50"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { value: "100" }, "100")))),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-footer" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-success auto-modal", onClick: () => this.setState({ modalShown: true }) },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_styles_index__WEBPACK_IMPORTED_MODULE_3__[/* Icon */ "a"], { icon: "plus" })),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "submit", className: "btn btn-primary pull-right", onClick: (e) => this.getGames(e) }, "Filter"),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "clearfix" })))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameCreateModal__WEBPACK_IMPORTED_MODULE_4__[/* GameCreateModal */ "a"], { show: this.state.modalShown, onCreated: (game) => this.onGameCreated(game), onHide: () => this.setState({ modalShown: false }), decks: this.props.decks })));
    }
}


/***/ }),

/***/ "Mgyd":
/*!*********************************************************!*\
  !*** ./ClientApp/components/game/GameHistoryWidget.tsx ***!
  \*********************************************************/
/*! exports provided: GameHistoryWidget */
/*! exports used: GameHistoryWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameHistoryWidget; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _shared_DateFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/DateFormat */ "PaiT");


function GameHistoryWidget(props) {
    const game = props.game;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { id: "history-heading", className: "card-header" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { href: "#history-collapse", "data-toggle": "collapse", "aria-expanded": "true", "aria-controls": "history-collapse" }, "History")),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", { id: "history-collapse", className: "collapse show list-group list-group-flush", role: "tabpanel", "aria-labelledby": "history-heading" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { className: "list-group-item" }, game ?
                (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
                    "Game Started ",
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_DateFormat__WEBPACK_IMPORTED_MODULE_1__[/* DateFormat */ "a"], { date: game.startTime })))
                :
                    'Unknown'))));
}


/***/ }),

/***/ "V9E0":
/*!******************************!*\
  !*** ./ClientApp/globals.ts ***!
  \******************************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "EVdn");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap */ "SYky");
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_1__);




/***/ }),

/***/ "XhPR":
/*!****************************************************!*\
  !*** ./ClientApp/components/game/GameDeckCard.tsx ***!
  \****************************************************/
/*! exports provided: GameDeckCard */
/*! exports used: GameDeckCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameDeckCard; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "IYwU");
/* harmony import */ var _shared_CardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/CardWidget */ "HM8e");
/* harmony import */ var _shared_DragType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/DragType */ "4/Ol");




function GameDeckCard(props) {
    const dc = props.card;
    const isUsable = true;
    const [{ isDragging }, drag] = Object(react_dnd__WEBPACK_IMPORTED_MODULE_1__[/* useDrag */ "c"])({
        item: {
            type: _shared_DragType__WEBPACK_IMPORTED_MODULE_3__[/* DragType */ "a"].Card.toString(),
            gameDeckCardCollectionId: dc.id
        },
        collect: monitor => ({
            isDragging: !!monitor.isDragging(),
        }),
    });
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: drag, className: 'current-card' + (isUsable ? '' : ' bg-secondary text-white disabled') + (isDragging ? ' bg-primary' : ''), "data-game-deck-card-collection-id": dc.id },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_CardWidget__WEBPACK_IMPORTED_MODULE_2__[/* CardWidget */ "a"], { card: dc.card })));
}


/***/ }),

/***/ "dQvt":
/*!*******************************************************!*\
  !*** ./ClientApp/components/game/GameCreateModal.tsx ***!
  \*******************************************************/
/*! exports provided: GameCreateModal */
/*! exports used: GameCreateModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameCreateModal; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "vS6h");
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _utils_nameof__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/nameof */ "ROx7");




class GameCreateModal extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = GameCreateModal.defaultState;
    }
    onCreated() {
        this.props.onHide();
        if (this.props.onCreated) {
            const { name, type, deckId } = this.state;
            this.props.onCreated({ name, type, deckId });
        }
    }
    onInputChange(prop, e) {
        const newState = {};
        newState[prop] = e.target.value;
        this.setState(newState, () => {
            this.setState({ canSave: this.canSave() });
        });
    }
    onSelectChange(prop, e) {
        const newState = {};
        newState[prop] = parseInt(e.target.value);
        this.setState(newState, () => {
            this.setState({ canSave: this.canSave() });
        });
    }
    canSave() {
        return !!this.state.name && !!this.state.type && !!this.state.deckId;
    }
    onExited() {
        this.setState(GameCreateModal.defaultState);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"], Object.assign({}, this.props, { onExited: () => this.onExited, centered: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Header, { closeButton: true },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Title, null, "Create Game")),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Body, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "container" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form", { className: "form auto-post" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { htmlFor: "mName" }, "Name"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", { type: "text", id: "mName", className: "form-control", placeholder: "Name", value: this.state.name, onChange: (e) => this.onInputChange(Object(_utils_nameof__WEBPACK_IMPORTED_MODULE_3__[/* nameof */ "a"])('name'), e) })),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { htmlFor: "mType" }, "Type"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("select", { id: "mType", className: "form-control", value: this.state.type, onChange: (e) => this.onSelectChange(Object(_utils_nameof__WEBPACK_IMPORTED_MODULE_3__[/* nameof */ "a"])('type'), e) },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { value: "1" }, "Triple Triad"))),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { htmlFor: "mDeckId" }, "Deck"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("select", { id: "mDeckId", className: "form-control", value: this.state.deckId, onChange: (e) => this.onSelectChange(Object(_utils_nameof__WEBPACK_IMPORTED_MODULE_3__[/* nameof */ "a"])('deckId'), e) },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", null, "Please select"),
                                    this.props.decks.map(x => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { key: x.id, value: x.id }, x.name)))))))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Footer, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-secondary", onClick: this.props.onHide }, "Close"),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.onCreated(), disabled: !this.state.canSave }, "OK"))));
    }
}
GameCreateModal.defaultState = {
    name: undefined,
    type: _clients_clients__WEBPACK_IMPORTED_MODULE_2__[/* GameType */ "i"].TripleTriad,
    deckId: undefined,
    canSave: false
};


/***/ }),

/***/ "iO7I":
/*!******************************************************!*\
  !*** ./ClientApp/components/game/GameDeckWidget.tsx ***!
  \******************************************************/
/*! exports provided: GameDeckWidget */
/*! exports used: GameDeckWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameDeckWidget; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _GameDeckCard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameDeckCard */ "XhPR");


function GameDeckWidget(props) {
    const egdccIds = props.excludeGameDeckCardCollectionIds;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", { className: "card-header" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null, "You")),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-body" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "card-text" }, props.gameDeck ?
                (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { id: "current-deck", className: "ch-cards" }, props.gameDeck.cardCollection.filter(x => !!egdccIds === false || egdccIds.indexOf(x.id) === -1).map(x => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameDeckCard__WEBPACK_IMPORTED_MODULE_1__[/* GameDeckCard */ "a"], { key: x.id, card: x }))))
                :
                    (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, "No deck selected"))))));
}


/***/ }),

/***/ "kt6b":
/*!****************************************************************************!*\
  !*** ./ClientApp/components/game/tripletriad/GameTripleTriadBoardGrid.tsx ***!
  \****************************************************************************/
/*! exports provided: GameTripleTriadBoardGrid */
/*! exports used: GameTripleTriadBoardGrid */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameTripleTriadBoardGrid; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "IYwU");
/* harmony import */ var _shared_CardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/CardWidget */ "HM8e");
/* harmony import */ var _shared_DragType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/DragType */ "4/Ol");




const GameTripleTriadBoardGrid = (props) => {
    const [{ isOver }, drop] = Object(react_dnd__WEBPACK_IMPORTED_MODULE_1__[/* useDrop */ "d"])({
        accept: _shared_DragType__WEBPACK_IMPORTED_MODULE_3__[/* DragType */ "a"].Card.toString(),
        drop: (item) => {
            if (props.onDrop) {
                props.onDrop({
                    row: props.row,
                    column: props.column,
                    gameDeckCardCollectionId: item.gameDeckCardCollectionId
                });
            }
        },
        collect: monitor => ({
            isOver: !!monitor.isOver(),
        }),
    });
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: drop, className: 'game-card' + (props.isSelected ? ' selected' : '') + (isOver ? ' bg-primary' : ''), "data-row": props.row, "data-column": props.column, "data-game-deck-card-collection-id": props.gameDeckCardCollectionId }, props.card &&
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_CardWidget__WEBPACK_IMPORTED_MODULE_2__[/* CardWidget */ "a"], { card: props.card })));
};


/***/ }),

/***/ "lbct":
/*!************************************************************************!*\
  !*** ./ClientApp/components/game/tripletriad/GameTripleTriadBoard.tsx ***!
  \************************************************************************/
/*! exports provided: GameTripleTriadBoard */
/*! exports used: GameTripleTriadBoard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameTripleTriadBoard; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../clients/clients */ "eQvj");
/* harmony import */ var _services_GameService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../services/GameService */ "CsQV");
/* harmony import */ var _GameTripleTriadBoardGrid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameTripleTriadBoardGrid */ "kt6b");




class GameTripleTriadBoard extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
    }
    isSelected(row, column) {
        return this.props.game.data.moves.findIndex(x => x.row === row && x.column === column) > -1;
    }
    getCardIdAtPosition(row, column) {
        const move = this.props.game.data.moves.find(x => x.row === row && x.column === column);
        return move ? move.cardId : null;
    }
    getCard(cardId) {
        const card = this.props.game.data.playedCards.find(x => x.id === cardId);
        return card;
    }
    async onCardDropped(data) {
        if (true) {
            console.log(data);
        }
        await _services_GameService__WEBPACK_IMPORTED_MODULE_2__[/* GameService */ "a"].move(this.props.game.id, new _clients_clients__WEBPACK_IMPORTED_MODULE_1__[/* GameTripleTriadMoveViewModel */ "h"](data));
        if (this.props.onUpdated) {
            this.props.onUpdated({
                game: this.props.game
            });
        }
    }
    getGameGrid(data) {
        if (!data) {
            return null;
        }
        const grids = [];
        let key = 0;
        for (var i = 0; i < data.rows; i++) {
            key++;
            for (var j = 0; j < data.columns; j++) {
                key++;
                const gameDeckCardCollectionId = this.getCardIdAtPosition(i, j);
                const card = this.getCard(gameDeckCardCollectionId);
                grids.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameTripleTriadBoardGrid__WEBPACK_IMPORTED_MODULE_3__[/* GameTripleTriadBoardGrid */ "a"], { key: key, row: i, column: j, card: card, isSelected: this.isSelected(i, j), gameDeckCardCollectionId: gameDeckCardCollectionId, onDrop: (x) => this.onCardDropped(x) }));
            }
        }
        return grids;
    }
    render() {
        const data = this.props.game.data;
        const grid = this.getGameGrid(data);
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { id: "current-game", className: "card-text ch-cards game-cards", "data-game-id": this.props.game.id }, grid));
    }
}


/***/ }),

/***/ "m/i0":
/*!***********************************************************!*\
  !*** ./ClientApp/components/game/GameSelectDeckModal.tsx ***!
  \***********************************************************/
/*! exports provided: GameSelectDeckModal */
/*! exports used: GameSelectDeckModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameSelectDeckModal; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ "vS6h");
/* harmony import */ var _utils_nameof__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/nameof */ "ROx7");



class GameSelectDeckModal extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.state = {
            canJoin: false
        };
    }
    onJoined() {
        this.props.onHide();
        if (this.props.onJoined) {
            const { deckId } = this.state;
            this.props.onJoined({
                deckId,
                gameId: this.props.game.id
            });
        }
    }
    onSelectChange(prop, e) {
        const newState = {};
        newState[prop] = parseInt(e.target.value);
        this.setState(newState, () => {
            this.setState({ canJoin: this.canJoin() });
        });
    }
    canJoin() {
        return !!this.state.deckId;
    }
    onExited() {
        this.setState(GameSelectDeckModal.defaultState);
    }
    render() {
        if (!this.props.game) {
            return null;
        }
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"], Object.assign({}, this.props, { onExited: () => this.onExited, centered: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Header, { closeButton: true },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Title, null, "Join Game")),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Body, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "container" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form", { className: "form auto-post" },
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                                "Join game ",
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", null, this.props.game.name),
                                "?"),
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "form-group" },
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { htmlFor: "mDeckId" }, "Deck"),
                                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("select", { id: "mDeckId", className: "form-control", value: this.state.deckId, onChange: (e) => this.onSelectChange(Object(_utils_nameof__WEBPACK_IMPORTED_MODULE_2__[/* nameof */ "a"])('deckId'), e) },
                                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", null, "Please select"),
                                    this.props.decks.map(x => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", { key: x.id, value: x.id }, x.name)))))))),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* Modal */ "a"].Footer, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-secondary", onClick: this.props.onHide }, "Close"),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.onJoined(), disabled: !this.state.canJoin }, "Join"))));
    }
}
GameSelectDeckModal.defaultState = {
    deckId: undefined,
    canJoin: false
};


/***/ }),

/***/ "wMVJ":
/*!********************************************!*\
  !*** ./ClientApp/components/game/Game.tsx ***!
  \********************************************/
/*! exports provided: Game */
/*! exports used: Game */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Game; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "IYwU");
/* harmony import */ var react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dnd-html5-backend */ "qJlv");
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _services_GameService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/GameService */ "CsQV");
/* harmony import */ var _shared_Layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/Layout */ "Xvn6");
/* harmony import */ var _GameBoard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GameBoard */ "xl0J");
/* harmony import */ var _GameDeckWidget__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GameDeckWidget */ "iO7I");
/* harmony import */ var _GameDetailWidget__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./GameDetailWidget */ "7E1t");
/* harmony import */ var _GameHistoryWidget__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./GameHistoryWidget */ "Mgyd");
/* harmony import */ var _GameUsersWidget__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./GameUsersWidget */ "BWid");











class Game extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.onGameBoardUpdated = async (event) => {
            await this.populateGame(event.game.id);
        };
        this.state = {
            lastUpdate: new Date(0)
        };
    }
    async populateGame(id) {
        const game = await _services_GameService__WEBPACK_IMPORTED_MODULE_4__[/* GameService */ "a"].getGameById(id);
        if (game) {
            if (this.state.lastUpdate < game.lastActivity) {
                this.setState({
                    game: game,
                    gameDeck: game.gameDeck,
                    lastUpdate: game.lastActivity
                });
            }
        }
    }
    async componentDidMount() {
        const gameId = this.props.match.params.id;
        await this.populateGame(gameId);
        this._interval = setInterval(async () => {
            await this.populateGame(gameId);
        }, 5000);
    }
    async componentWillReceiveProps(nextProps) {
        const gameId = this.props.match.params.id;
        if (nextProps.match.params.id !== gameId) {
            await this.populateGame(gameId);
        }
    }
    componentWillUnmount() {
        clearInterval(this._interval);
    }
    render() {
        const game = this.state.game;
        let playedGdccIds;
        if (game && game.type === _clients_clients__WEBPACK_IMPORTED_MODULE_3__[/* GameType */ "i"].TripleTriad) {
            const data = game.data;
            if (data) {
                playedGdccIds = data.moves.map(x => x.gameDeckCardCollectionId);
            }
        }
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_Layout__WEBPACK_IMPORTED_MODULE_5__[/* Layout */ "a"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "row" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "col-lg-2" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameDetailWidget__WEBPACK_IMPORTED_MODULE_8__[/* GameDetailWidget */ "a"], { game: game }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameUsersWidget__WEBPACK_IMPORTED_MODULE_10__[/* GameUsersWidget */ "a"], { currentGameUserId: game ? game.currentGameUserId : null, users: game ? game.users : null }),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameHistoryWidget__WEBPACK_IMPORTED_MODULE_9__[/* GameHistoryWidget */ "a"], { game: game })),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_dnd__WEBPACK_IMPORTED_MODULE_1__[/* DndProvider */ "b"], { backend: react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"] },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "col-lg-6" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameBoard__WEBPACK_IMPORTED_MODULE_6__[/* GameBoard */ "a"], { game: game, onUpdated: this.onGameBoardUpdated })),
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "col-lg-2" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_GameDeckWidget__WEBPACK_IMPORTED_MODULE_7__[/* GameDeckWidget */ "a"], { gameDeck: this.state.gameDeck, excludeGameDeckCardCollectionIds: playedGdccIds }))))));
    }
}


/***/ }),

/***/ "xl0J":
/*!*************************************************!*\
  !*** ./ClientApp/components/game/GameBoard.tsx ***!
  \*************************************************/
/*! exports provided: GameBoard */
/*! exports used: GameBoard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GameBoard; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _clients_clients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../clients/clients */ "eQvj");
/* harmony import */ var _tripletriad_GameTripleTriadBoard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tripletriad/GameTripleTriadBoard */ "lbct");



class GameBoard extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
    constructor(props) {
        super(props);
        this.onGameTripleTriadBoardUpdated = (event) => {
            if (this.props.onUpdated) {
                this.props.onUpdated({
                    game: event.game
                });
            }
        };
    }
    getGameBoard(game) {
        if (!game) {
            return GameBoard.nullGameBoard;
        }
        switch (game.type) {
            case _clients_clients__WEBPACK_IMPORTED_MODULE_1__[/* GameType */ "i"].TripleTriad:
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_tripletriad_GameTripleTriadBoard__WEBPACK_IMPORTED_MODULE_2__[/* GameTripleTriadBoard */ "a"], { game: game, onUpdated: this.onGameTripleTriadBoardUpdated });
            default:
                return GameBoard.nullGameBoard;
        }
    }
    render() {
        const game = this.props.game;
        const gameBoard = this.getGameBoard(game);
        return gameBoard;
    }
}
GameBoard.nullGameBoard = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, "No game selected");


/***/ })

},[[5,0,1]]]);